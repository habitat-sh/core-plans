version: '3'

services:
  srv1:
    &server-configuration
    image: core/minio:latest
    command: --peer srv1
    environment:
      HAB_MINIO: |
        standalone = false
        members = [
          "http://srv1/hab/svc/minio/data",
          "http://srv2/hab/svc/minio/data",
          "http://srv3/hab/svc/minio/data",
          "http://srv4/hab/svc/minio/data",
        ]
    ports:
      - "9000"
  srv2:
    *server-configuration
  srv3:
    *server-configuration
  srv4:
    *server-configuration
